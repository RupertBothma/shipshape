apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: helloworld
  namespace: shipshape
spec:
  selector:
    matchLabels:
      app: helloworld
  # Propagate service labels into scraped metrics so alert rules can scope
  # queries cleanly by environment (test vs prod).
  targetLabels:
    - env
  endpoints:
    - port: http
      path: /metrics
      interval: 30s
